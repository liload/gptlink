var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,s=(e,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(e,o,a[o]);if(t)for(var o of t(a))l.call(a,o)&&r(e,o,a[o]);return e};import{c,f as p}from"./index.8ad7c599.js";import{u as i}from"./useBasicForm.b0a1b532.js";import{_ as d,a as m}from"./index.76f0df78.js";import{d as u,r as b,o as f,h as g,i as v,c as _,f as y,w as h,b as w,u as j,g as I,E as P}from"./vendor.b96c6562.js";const O=[{field:"client_id",component:"Input",label:"公众号AppId",required:!0,componentProps:{placeholder:"请输入公众号AppId"}},{field:"client_secret",component:"Input",label:"公众号Secret",required:!0,componentProps:{placeholder:"请输入公众号Secret"}}],V=[{field:"client_id",component:"Input",label:"网站应用AppId",required:!0,componentProps:{placeholder:"请输入应用AppId"}},{field:"client_secret",component:"Input",label:"网站应用Secret",required:!0,componentProps:{placeholder:"请输入应用Secret"}}];const C={class:"cb-page open"},S={class:"cb-m-b-40"},q={class:"cb-m-l-60"},A=I("确认");var x=d(u({__name:"wechat",setup(e){const t=b("1"),n=b([{value:"1",name:"微信公众号"},{value:"3",name:"微信网站应用"}]),{register:l,validate:r,setFieldsValue:d,resetFields:u,setProps:I}=i({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:O});f((()=>{U()}));const x=e=>{u();I({schemas:{1:O,3:V}[e]}),setTimeout((()=>{U()}),50)},F=async()=>{try{const e=await r(),a={type:t.value,config:s({},e)};e.agreement&&(a.config={agreements:s({},e)});const{err_code:o}=await m().open.openConfig(a);o||P.success("保存成功")}catch(e){}},U=async()=>{try{const{data:l}=await m().open.getConfig({type:t.value});"5"===t.value&&(l.config=(e=s({},l.config),n={admin_logo:l.config.admin_logo,web_logo:l.config.web_logo},a(e,o(n)))),d(s({},l.config))}catch(l){}var e,n};return(e,a)=>{const o=g("CbTab"),r=g("el-button"),s=g("el-card");return v(),_("div",C,[y(s,{class:"open-main"},{default:h((()=>[w("div",S,[y(o,{tabs:n.value,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),onChange:x},null,8,["tabs","modelValue"])]),y(j(c),{onRegister:j(l)},{agreement:h((({model:e,field:a})=>[y(j(p),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["onRegister"]),w("div",q,[y(r,{type:"primary",onClick:F},{default:h((()=>[A])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-b381e582"]]);export{x as default};
