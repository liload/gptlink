var e=Object.defineProperty,l=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,o,a)=>o in l?e(l,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[o]=a,r=(e,l)=>{for(var o in l||(l={}))s.call(l,o)&&n(e,o,l[o]);if(a)for(var o of a(l))t.call(l,o)&&n(e,o,l[o]);return e};import{c as p,f as i}from"./index.8ad7c599.js";import{u as d}from"./useBasicForm.b0a1b532.js";import{d as c,r as u,o as m,h as f,i as b,c as g,f as _,w as v,b as y,u as h,ao as k,s as q,az as w,av as P,e as x,g as I,E as O,v as j,x as C}from"./vendor.b96c6562.js";import{_ as z,a as V}from"./index.76f0df78.js";import{t as L}from"./toolbarKeys.efa257c4.js";const S=[{field:"account",component:"Input",label:"账号",required:!0,componentProps:{placeholder:"请输入账号"}},{field:"password",component:"Input",label:"密码",required:!0,componentProps:{placeholder:"请输入密码"}},{field:"sign",component:"Input",label:"签名",required:!0,componentProps:{placeholder:"请输入签名"}}],F=[{field:"key_type",component:"Select",label:"密钥类型",required:!0,defaultValue:"gptlink",componentProps:{options:[{label:"GPTLink",value:"gptlink"},{label:"OpenAI",value:"openai"}]}},{field:"secret_key",component:"Input",label:"API密钥",required:!0,componentProps:{placeholder:"请输入api密钥"}},{field:"login_type",component:"Select",label:"用户登陆方式",required:!0,defaultValue:"2",componentProps:{options:[{label:"用户名/密码登录",value:"1"},{label:"微信登陆",value:"2"},{label:"微信+手机号登陆",value:"4"}]}},{field:"name",component:"Input",label:"站点名称",required:!1,componentProps:{placeholder:"输入网址名称"}},{field:"icp",component:"Input",label:"网站底部icp备案号",required:!1,componentProps:{placeholder:"请输入icp备案号"}},{field:"web_logo",component:"Input",label:"用户端LOGO",required:!1,slot:"web_logo"},{field:"admin_logo",component:"Input",label:"管理端LOGO",required:!1,slot:"admin_logo"},{field:"user_logo",component:"Input",label:"用户默认头像",required:!1,slot:"user_logo"}],G=[{field:"enable",component:"Switch",label:"是否启用",required:!0},{field:"title",component:"Input",label:"协议标题",required:!0,componentProps:{placeholder:"请输入协议标题"}},{field:"agreement",component:"Input",label:"协议内容",required:!0,slot:"agreement"}],R=[{field:"title",component:"Input",label:"微信分享标题",required:!1,componentProps:{placeholder:"请输入协议标题"}},{field:"desc",component:"Input",label:"微信分享描述",required:!1,componentProps:{placeholder:"请输入协议标题"}},{field:"img_url",component:"Input",label:"微信分享图",required:!1,slot:"img_url"},{field:"share_img",component:"Input",label:"分享海报",required:!1,slot:"share_img"}],T=[{field:"enable",component:"Switch",label:"是否启用",required:!0},{field:"keywords",component:"Input",label:"关键词",required:!0,componentProps:{placeholder:'使用json格式传入，用户发送的对话包含关键词将被拒绝回答，示例：["xxx", "xxx2", "xxx3"]',type:"textarea",rows:15}}];const U={class:"cb-page"},A=(e=>(j("data-v-69c047c8"),e=e(),C(),e))((()=>y("div",{style:{"margin-bottom":"10px"}},[I("GPTLink密钥获取："),y("a",{href:"https://gpt-link.com",target:"_blank"},"点此前往")],-1))),K={class:"cb-m-b-40"},D={class:"open-upload cb-flex"},E=["src"],B={key:2,class:"open-upload-mask"},H={class:"open-upload cb-flex"},J=["src"],M={key:2,class:"open-upload-mask"},N={class:"open-upload cb-flex"},Q=["src"],W={key:2,class:"open-upload-mask"},X={class:"open-upload cb-flex"},Y=["src"],Z={key:2,class:"open-upload-mask"},$={class:"open-upload cb-flex"},ee=["src"],le={key:2,class:"open-upload-mask"},oe={class:"cb-m-l-60"},ae=I("确认");var se=z(c({__name:"system",setup(e){const a=u("5"),s=u([{value:"5",name:"系统配置"},{value:"6",name:"协议配置"},{value:"8",name:"关键词配置"},{value:"9",name:"分享配置"},{value:"4",name:"创蓝短信配置"}]),{register:t,validate:n,setFieldsValue:c,resetFields:I,setProps:j}=d({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:F});m((()=>{se()}));const C=e=>{I();j({schemas:{4:S,5:F,6:G,8:T,9:R}[e]}),setTimeout((()=>{se()}),50)},z=async()=>{try{const e=await n(),l={type:a.value,config:r({},e)},{err_code:o}=await V().open.openConfig(l);o||O.success("保存成功")}catch(e){}},se=async()=>{try{const{data:t}=await V().open.getConfig({type:a.value});"5"===a.value&&(t.config=(e=r({},t.config),s={admin_logo:t.config.admin_logo,web_logo:t.config.web_logo},l(e,o(s)))),c(r({},t.config))}catch(t){}var e,s},te=async(e,l)=>{const o=await pe(e);c({[l]:o})},ne=async e=>await pe(e),re=e=>{c({[e]:""})},pe=e=>new Promise(((l,o)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=e=>{l(e.target.result)}}));return(e,l)=>{const o=f("el-card"),n=f("CbTab"),r=f("el-icon"),d=f("el-button");return b(),g("div",U,[_(o,null,{default:v((()=>[A])),_:1}),_(o,{class:"open-main"},{default:v((()=>[y("div",K,[_(n,{tabs:s.value,modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),onChange:C},null,8,["tabs","modelValue"])]),_(h(p),{onRegister:h(t)},{web_logo:v((({model:e,field:o})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>te(e,"web_logo")},{default:v((()=>[y("div",D,[e[o]?(b(),g("img",{key:0,src:e[o],class:"open-upload-img"},null,8,E)):(b(),q(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(w))])),_:1})),e[o]?(b(),g("div",B,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:l[1]||(l[1]=e=>re("web_logo"))},{default:v((()=>[_(h(P))])),_:1})])):x("",!0)])])),_:2},1032,["http-request","before-upload"])])),admin_logo:v((({model:e,field:o})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>te(e,"admin_logo")},{default:v((()=>[y("div",H,[e[o]?(b(),g("img",{key:0,src:e[o],class:"open-upload-img"},null,8,J)):(b(),q(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(w))])),_:1})),e[o]?(b(),g("div",M,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:l[2]||(l[2]=e=>re("admin_logo"))},{default:v((()=>[_(h(P))])),_:1})])):x("",!0)])])),_:2},1032,["http-request","before-upload"])])),user_logo:v((({model:e,field:o})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>te(e,"user_logo")},{default:v((()=>[y("div",N,[e[o]?(b(),g("img",{key:0,src:e[o],class:"open-upload-img"},null,8,Q)):(b(),q(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(w))])),_:1})),e[o]?(b(),g("div",W,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:l[3]||(l[3]=e=>re("user_logo"))},{default:v((()=>[_(h(P))])),_:1})])):x("",!0)])])),_:2},1032,["http-request","before-upload"])])),img_url:v((({model:e,field:o})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>te(e,"img_url")},{default:v((()=>[y("div",X,[e[o]?(b(),g("img",{key:0,src:e[o],class:"open-upload-img"},null,8,Y)):(b(),q(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(w))])),_:1})),e[o]?(b(),g("div",Z,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:l[4]||(l[4]=e=>re("img_url"))},{default:v((()=>[_(h(P))])),_:1})])):x("",!0)])])),_:2},1032,["http-request","before-upload"])])),share_img:v((({model:e,field:o})=>[_(h(k),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>te(e,"share_img")},{default:v((()=>[y("div",$,[e[o]?(b(),g("img",{key:0,src:e[o],class:"open-upload-img"},null,8,ee)):(b(),q(r,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(h(w))])),_:1})),e[o]?(b(),g("div",le,[_(r,{color:"#fff",class:"open-upload-del",size:26,onClick:l[5]||(l[5]=e=>re("share_img"))},{default:v((()=>[_(h(P))])),_:1})])):x("",!0)])])),_:2},1032,["http-request","before-upload"])])),agreement:v((({model:e,field:l})=>[_(h(i),{modelValue:e[l],"onUpdate:modelValue":o=>e[l]=o,useLibrary:!1,"http-request":ne,toolbarKeys:h(L)},null,8,["modelValue","onUpdate:modelValue","toolbarKeys"])])),_:1},8,["onRegister"]),y("div",oe,[_(d,{type:"primary",onClick:z},{default:v((()=>[ae])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-69c047c8"]]);export{se as default};
